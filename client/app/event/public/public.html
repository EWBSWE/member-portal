<div class="container event">
    <div class="row">
        <div class="col-xs-12">
            <h1>{{ ev.name }}</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-6">
            <p style="white-space: pre-wrap;">{{ev.description}}</p>

            <p>Sista anmälningsdag: <strong>{{ev.dueDate | amDateFormat: 'YYYY-MM-DD'}}</strong></p>

            <p>Kontakt: {{ev.contact}}</p>

            <a href="http://www.ingenjorerutangranser.se">
                <img class="logo" src="/assets/images/ewb-logo.png" alt="Logo" />
            </a>
        </div>
        <div class="col-xs-12 col-md-6">
            <p class="bg-warning" ng-show="ev.isPast" style="padding: 20px; border-radius: 5px;">Sista anmälningsdag för det här evenemanget har passerat.</p>
            <p class="bg-warning" ng-show="!ev.notificationOpen" style="padding: 20px; border-radius: 5px;">Anmälan är stängd.</p>
            <form novalidate name="form" class="payment-form">
                <p>
                    Delta i <strong>{{ev.addons[0].product.name}}</strong> för en kostnad på <strong>{{ev.addons[0].product.price}} kr</strong></span>.
                </p>
                <p class="help-block" ng-show="ev.addons[0].product.description" style="white-space: pre-wrap;">{{ev.addons[0].product.description}}</p>

                <div ng-show="ev.addons.length" ng-repeat="addon in ev.addons" ng-if="$index > 0">
                    <p><strong>Välj till</strong></p>
                    <label class="radio-inline control-label">
                        <input type="checkbox" name="type" ng-value="addon.id" ng-model="participant.addons[addon.id]" ng-disabled="addon.capacity <= 0"/>
                        <span>{{addon.product.name}} för <strong>{{addon.product.price}} kr</strong></span>. <span ng-show="addon.capacity <= 0">Fullbokad!</span>
                        <p class="help-block" ng-show="addon.product.description" style="white-space: pre-wrap;">{{addon.product.description}}</p>
                    </label>
                </div>

                <div ng-show="ev.addons[0].capacity <= 0">
                    <p>
                        Vi kan inte ta emot fler anmälningar då antalet platser är begränsat. Tack för visat intresse!
                    </p>
                </div>

                <hr />

                <div ng-class="{'form-group': true, 'has-error': form.inputName.$error.name, 'has-success': form.inputName.$valid}">
                    <label class="control-label" for="inputName" translate>Name</label> *
                    <input class="form-control" type="text" name="inputName" id="inputName" ng-model="participant.name" ng-disabled="ev.addons[0].capacity <= 0 || !ev.notificationOpen" required/>
                    <p class="help-block" ng-show="form.inputName.$error.name" translate>
                    Please enter a name.
                    </p>
                </div>

                <div ng-class="{'form-group': true, 'has-error': form.inputEmail.$error.email, 'has-success': form.inputEmail.$valid}">
                    <label class="control-label" for="inputEmail" translate>Email</label> *
                    <input class="form-control" type="email" name="inputEmail" id="inputEmail" ng-model="participant.email" ng-disabled="ev.addons[0].capacity <= 0 || !ev.notificationOpen" required/>
                    <p class="help-block" ng-show="form.inputEmail.$error.email" translate>
                    Please enter a valid email address.
                    </p>
                </div>

                <div class="form-group">
                    <label class="control-label" for="inputComment" translate>Comment</label>
                    <textarea rows="3" class="form-control" name="inputComment" id="inputComment" ng-model="participant.comment" ng-disabled="ev.addons[0].capacity <= 0 || !ev.notificationOpen"></textarea>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-lg" ng-click="initiatePayment()" ng-disabled="ev.addons[0].capacity <= 0 || !ev.notificationOpen" translate>Submit</button>
                </div>
                <p class="help-block" translate>
                When you click <strong>Submit</strong> your transaction is managed securely by <a href="https://stripe.com/se" target="_blank">Stripe</a>. When the transaction is completed we send you a confirmation to the email address specified above.
                </p>
            </form>
        </div>
    </div>
</div>

<div class="js-confirmation modal fade" role="dialog" aria-labelledby="confirmation-label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="confirmation-label" translate>Thank you for participating!</h4>
            </div>
            <div class="modal-body">
                <p translate>A confirmation of your participation is sent to <strong>{{successEmail}}</strong>.</p>
                <p translate>Do you any questions regarding the event or anything payment related? Reach out to us at <a href="mailto:{{ev.contact}}">{{ev.contact}}</a> for questions regarding this event and <a href="mailto:ict@ingenjorerutangranser.se">ict@ingenjorerutangranser.se</a> for payment or technical questions.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" translate>Close</button>
            </div>
        </div>
    </div>
</div>

<div class="js-payment-error modal fade" role="dialog" aria-labelledby="confirmation-label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="confirmation-label" translate>The transaction was unsuccessful</h4>
            </div>
            <div class="modal-body">
                <p>{{errorMessage}}</p>
                <p translate>Do you any questions regarding the event or anything payment related? Reach out to us at <a href="mailto:{{ev.contact}}">{{ev.contact}}</a> for questions regarding this event and <a href="mailto:ict@ingenjorerutangranser.se">ict@ingenjorerutangranser.se</a> for payment or technical questions.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" translate>Close</button>
            </div>
        </div>
    </div>
</div>
